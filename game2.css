:root{
  --bg:#071022;
  --card:#0b1726;
  --accent:#7bd389;
  --accent2:#e6b54a; /* tonēts mazliet tumšāks, vieglāk lasāms */
  --muted:#98a2b3;
  --glass: rgba(255,255,255,0.02);
  --btn-primary-start: #7bd389;
  --btn-primary-end: #45b3ff;
  --btn-secondary-start: #ffd166;
  --btn-secondary-end: #ff9a66;
  --danger: #ff7878;
  --good: #6ae07a;
  --warn: #ffb86b;
  --info: #66b3ff;
  --forbidden: #ff5c5c;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:#e7f0ff;background:linear-gradient(180deg,#061421,#071428)}
#app{max-width:1200px;margin:18px auto;padding:18px;display:flex;flex-direction:column;gap:14px}
header{display:flex;flex-direction:column;align-items:center;gap:10px}
h1{margin:0;font-size:28px}
.sub{margin:0;color:var(--muted)}

#topControls{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
#topControls label{color:var(--muted);font-weight:600}
#goalWrap{display:flex;flex-direction:column;gap:4px;margin-left:12px}
#mainGoal{font-weight:800}
#goalAmount{color:var(--accent2)}
#goalProgressValue{font-weight:800;color:var(--accent)}

#topBar{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap}
.info{display:flex;gap:14px;align-items:center}
.status{display:flex;gap:14px;align-items:center;background:var(--glass);padding:10px;border-radius:10px;flex-wrap:wrap}
#remainingBox strong{color:var(--accent2)}

/* happiness bar */
.happinessWrap{min-width:220px}
.hbar{background:rgba(255,255,255,0.03);height:12px;border-radius:8px;overflow:hidden;margin-top:6px}
.hbar > div{height:100%;width:50%;background:linear-gradient(90deg,#ffd166,#7bd389);transition:width .6s ease}

/* layout */
#main{display:flex;gap:12px;flex-wrap:wrap}
#bank{width:320px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));padding:12px;border-radius:12px}
#bank h2{margin-top:0;color:var(--accent)}
#chips{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0}
.chip{
  background:linear-gradient(180deg,#1f2a37,#0f1724);
  border:1px solid rgba(255,255,255,0.03);
  padding:8px 10px;border-radius:8px;color:#fff;cursor:grab;
  user-select:none;font-weight:700;min-width:64px;text-align:center;
  box-shadow: 0 6px 18px rgba(0,0,0,0.45);
}
.chip.invest{background:linear-gradient(90deg,#2b6b4a,#375ad8);color:#fff}
.chip:active{cursor:grabbing}
.chip:focus{outline:2px solid rgba(123,211,137,0.9); box-shadow:0 8px 22px rgba(0,0,0,0.45)}
.bankControls{display:flex;gap:8px;align-items:center;margin-top:8px}
#customAmount, #loanAmount, #investAmountInput{background:linear-gradient(180deg,#0f2230,#07101a);color:#e7f0ff;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;font-weight:700;min-width:84px}
.muted{color:var(--muted)}
.small{font-size:12px}

/* invest options */
.investOptions{display:flex;flex-direction:column;gap:6px;margin-top:8px}
.investOption{display:flex;gap:8px;align-items:center}
.investOption button{padding:6px 10px;border-radius:8px;border:0;font-weight:700}

/* pogu stili */
button{
  cursor:pointer;
  border:0;
  padding:8px 12px;
  border-radius:8px;
  font-weight:700;
  transition:transform .08s ease, box-shadow .12s ease, filter .08s ease;
}
button:active{transform:translateY(2px)}
button.primary{
  background: linear-gradient(90deg,var(--btn-primary-start),var(--btn-primary-end));
  color:#052733;
  box-shadow: 0 10px 28px rgba(69,179,255,0.12);
}
button.primary:hover{filter:brightness(1.03)}
button.secondary{
  background: linear-gradient(90deg,var(--btn-secondary-start),var(--btn-secondary-end));
  color:#052733;
  box-shadow: 0 8px 24px rgba(255,154,102,0.10);
}
button.secondary:hover{filter:brightness(1.03)}
/* specific smaller buttons */
#addChip{padding:8px 10px}
#downloadState{padding:8px 12px}

/* categories */
#space{flex:1;display:flex;flex-direction:column;gap:12px}
#categories{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}
.category{
  min-height:140px;background:var(--card);border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.02);display:flex;flex-direction:column;gap:8px;
}
.category h4{margin:0;font-size:15px;display:flex;justify-content:space-between;align-items:center;gap:8px}
.dropzone{flex:1;background:linear-gradient(180deg, rgba(255,255,255,0.005), rgba(255,255,255,0.002));border-radius:8px;padding:8px;overflow:auto;display:flex;flex-wrap:wrap;gap:8px}
.catTotal{font-weight:800;color:var(--accent)}
.catBadge{background:rgba(255,255,255,0.03);padding:4px 8px;border-radius:8px;font-weight:700;color:var(--muted)}

/* controls */
.controls{display:flex;justify-content:space-between;align-items:center;gap:12px}
#controls .left button{background:linear-gradient(90deg,#7bd389,#45b3ff);color:#052733}
#eventArea{color:var(--muted)}
#message{font-weight:700;color:var(--accent2)}
#challengeStatus{margin-top:6px}

/* log: clearer and more engaging, less glaring colors */
#logWrap{background:var(--glass);padding:10px;border-radius:8px;max-height:320px;overflow:auto}
.logEntry{
  padding:10px;border-radius:10px;margin-bottom:8px;
  display:block;color:#fff;
  box-shadow: 0 6px 18px rgba(0,0,0,0.35);
  font-size:14px;line-height:1.3;
}
.logEntry .logHeader{display:flex;align-items:center;gap:8px;font-weight:800}
.logEntry .logBody{margin-top:6px;color:rgba(255,255,255,0.95);font-size:13px}
.logEntry .timestamp{font-weight:600;color:rgba(255,255,255,0.85);font-size:12px;margin-left:6px}

/* level colors: darker, less saturated gradients for readability */
.logEntry.level-success{background:linear-gradient(90deg, #2b7a45 0%, #1f6036 100%);}
.logEntry.level-error{background:linear-gradient(90deg, #8b1f1f 0%, #661111 100%);}
.logEntry.level-warn{background:linear-gradient(90deg, #b36a0f 0%, #8f4b05 100%);}
.logEntry.level-info{background:linear-gradient(90deg, #1b6aa1 0%, #0f4b80 100%);}

/* modal overlay for invest flow */
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:60}
.modal.hidden{display:none}
.modal-content{background:var(--card);padding:18px;border-radius:12px;min-width:320px;max-width:420px}
.modal-content h3{margin:0 0 8px 0}
.modal-content .row{display:flex;flex-direction:column;gap:6px;margin-bottom:8px}
.modal-content label{font-weight:700;color:var(--muted);font-size:13px}
.modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:8px}

/* confetti canvas */
#confetti{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;display:none}
.dropzone.dragover{outline:3px dashed rgba(123,211,137,0.95);box-shadow:0 10px 30px rgba(0,0,0,0.45) inset}

/* forbidden / disallowed visual feedback */
.dropzone.forbidden{outline:3px dashed rgba(255,92,92,0.95); box-shadow: 0 10px 30px rgba(255,92,92,0.08) inset; animation:flash 0.45s ease;}
@keyframes flash{ 0%{ transform:translateY(0)} 50%{ transform:translateY(-6px)} 100%{ transform:translateY(0)} }

/* shake animation for denial */
.shake{ animation:shakeIt .42s ease; }
@keyframes shakeIt{ 10%{ transform:translateX(-6px) } 20%{ transform:translateX(6px) } 30%{ transform:translateX(-6px) } 40%{ transform:translateX(6px) } 100%{ transform:translateX(0) } }

/* warnings */
.warning{color:var(--danger);font-weight:800}

/* responsive */
@media (max-width:1000px){
  #main{flex-direction:column}
  #bank{width:100%}
}
.chip.mandatory{
  border: 1px dashed rgba(255,255,255,0.12);
  background: linear-gradient(90deg,#4b2f1f,#5b3b28);
  color: #fff;
  font-weight:800;
  box-shadow: 0 8px 22px rgba(0,0,0,0.55);
}

 .big-red-x-icon {
    position: fixed;
    top: calc(max(8px, env(safe-area-inset-top)));
    right: calc(max(8px, env(safe-area-inset-right)));
    width: clamp(40px, 8vw, 64px); /* keeps it between 40px and 64px */
    height: clamp(40px, 8vw, 64px);
    display: grid;
    place-items: center;
    z-index: 9999;
    text-decoration: none;
    color: #e53935; /* stroke color of the X */
    -webkit-tap-highlight-color: transparent;
    transition: transform 120ms ease, opacity 120ms ease;
  }

  .big-red-x-icon:hover { transform: scale(1.06); opacity: 0.98; }
  .big-red-x-icon:active { transform: scale(0.98); }

  /* SVG fills the available box */
  .big-red-x-icon svg { width: 100%; height: 100%; display: block; }

  /* Make sure the clickable area remains circular-ish on pointer devices (optional) */
  .big-red-x-icon::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 50%;
    pointer-events: none;
  }